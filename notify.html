<!DOCTYPE html>
<head>
	<meta name="viewport" content="width =device-width, initial-scale=1.0">
	<title>Task</title>
 	<style>
 		textarea {
			width:97%;
			height:97vh;
			border:none;
			outline: none;
			padding: 5px;
			font-size:16px;
			font-family:inherit;
			resize:none;
		}
	</style>
	<script>
		function show(data){
			if (event.keyCode == 13 && data.substring(data.length-2) == "\n\n\n") {
				navigator.serviceWorker.getRegistration().then(function(r) { r.showNotification(data, {body: data}); });
			}
		}
		function init(){
			document.getElementById("tbData").value = decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + encodeURIComponent("data").replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));
			navigator.serviceWorker.register("sw.js").then(function(r) {
				Notification.requestPermission().then(function (result) {
					if (result != "granted") {
						alert("failed");
					}
				});
			});
		}
	</script>
</head>
<body onload="init();">
	<textarea id="tbData" onkeyup="show(this.value);"></textarea>
</body>
</html>
